<div class="bg-gray-900 rounded-xl border border-gray-800 p-5">
    <div class="flex items-center justify-between mb-4">
        <h2 class="text-sm font-semibold text-gray-400 uppercase tracking-wider">Swap-renter (SEB live)</h2>
        <span class="htmx-indicator text-xs text-brand-400">Oppdaterer...</span>
    </div>
    {% if swap_rates %}
    <table class="w-full text-sm">
        <thead>
            <tr class="text-gray-500 text-xs">
                <th class="text-left pb-2">Tenor</th>
                <th class="text-right pb-2">Rente</th>
                <th class="text-right pb-2">Dag</th>
                <th class="text-right pb-2">90d</th>
            </tr>
        </thead>
        <tbody class="text-gray-200">
            {% for rate in swap_rates %}
            {% set history = swap_history.get(rate.tenor, []) %}
            {% set change_90d = (rate.rate - history[0]["rate"]) if history|length > 1 else 0 %}
            <tr class="border-t border-gray-800/50">
                <td class="py-2">{{ rate.tenor }}</td>
                <td class="text-right font-mono font-medium">{{ "%.2f"|format(rate.rate) }}%</td>
                <td class="text-right font-mono text-sm
                    {% if rate.change_today < 0 %}text-emerald-400{% elif rate.change_today > 0 %}text-red-400{% else %}text-gray-500{% endif %}">
                    {% if rate.change_today != 0 %}{{ "%+.2f"|format(rate.change_today) }}{% else %}&mdash;{% endif %}
                </td>
                <td class="text-right font-mono text-sm
                    {% if change_90d < -0.05 %}text-emerald-400{% elif change_90d > 0.05 %}text-red-400{% else %}text-gray-500{% endif %}">
                    {% if change_90d != 0 %}{{ "%+.2f"|format(change_90d) }}{% else %}&mdash;{% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="text-gray-500 text-sm">Kunne ikke hente swap-renter fra SEB</p>
    {% endif %}
</div>
